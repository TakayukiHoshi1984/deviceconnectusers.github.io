# Mediastreamrecording API

## 録画を開始する

デバイスのカメラを使って録画を開始します。

### 基本情報

APIパス
: /gotapi/mediaStreamRecording/record

HTTPメソッド
: POST

### リクエスト

#### HTTPヘッダー

|ヘッダーの種類|内容|
|----------------|----------------|
|Content-Type|application/json|

#### パラメータ

|キー|必須|型|場所|説明|
|-----|-----|-----|-----|-----|
|serviceId|✓|文字列|クエリー|サービスID|
|accessToken|✓|文字列|クエリー|アクセストークン|

### レスポンス

#### HTTPレスポンス

|HTTPステータスコード|内容|
|-----|-----|
|200||

エラーについては [エラーについて](./error.md) を参照してください。

#### レスポンス内容

|キー|型|
|----|----|
|result|数値|
|product|文字列|
|version|文字列|

## 録画を停止する

録画を停止します。

### 基本情報

APIパス
: /gotapi/mediaStreamRecording/stop

HTTPメソッド
: PUT

### リクエスト

#### HTTPヘッダー

|ヘッダーの種類|内容|
|----------------|----------------|
|Content-Type|application/json|

#### パラメータ

|キー|必須|型|場所|説明|
|-----|-----|-----|-----|-----|
|serviceId|✓|文字列|クエリー|サービスID|
|accessToken|✓|文字列|クエリー|アクセストークン|

### レスポンス

#### HTTPレスポンス

|HTTPステータスコード|内容|
|-----|-----|
|200||

エラーについては [エラーについて](./error.md) を参照してください。

#### レスポンス内容

|キー|型|
|----|----|
|result|数値|
|product|文字列|
|version|文字列|

## レコーダーの情報を取得

デバイスが持っているレコーダーに関する情報を取得します。複数返ってきます。

### 基本情報

APIパス
: /gotapi/mediaStreamRecording/mediarecorder

HTTPメソッド
: GET

### リクエスト

#### HTTPヘッダー

|ヘッダーの種類|内容|
|----------------|----------------|
|Content-Type|application/json|

#### パラメータ

|キー|必須|型|場所|説明|
|-----|-----|-----|-----|-----|
|serviceId|✓|文字列|クエリー|サービスIDを指定します|
|accessToken|✓|文字列|クエリー|取得したアクセストークン|

### レスポンス

#### HTTPレスポンス

|HTTPステータスコード|内容|
|-----|-----|
|200||

エラーについては [エラーについて](./error.md) を参照してください。

#### レスポンス内容

|キー||型|
|----|----|----|
|result||数値|
|product||文字列|
|version||文字列|
|recorders||配列|
||imageWidth|数値|
||mimeType|文字列|
||config|文字列|
||id|文字列|
||name|文字列|
||state|文字列|
||imageHeight|数値|

## 写真を撮影

MediaStreamRecordingを使って写真を撮影します

### 基本情報

APIパス
: /gotapi/mediaStreamRecording/takephoto

HTTPメソッド
: POST

### リクエスト

#### HTTPヘッダー

|ヘッダーの種類|内容|
|----------------|----------------|
|Content-Type|application/json|

#### パラメータ

|キー|必須|型|場所|説明|
|-----|-----|-----|-----|-----|
|serviceId|✓|文字列|クエリー|サービスIDを指定します|
|accessToken|✓|文字列|クエリー|取得したアクセストークン|

### レスポンス

#### HTTPレスポンス

|HTTPステータスコード|内容|
|-----|-----|
|200||

エラーについては [エラーについて](./error.md) を参照してください。

#### レスポンス内容

|キー|型|
|----|----|
|result|数値|
|product|文字列|
|version|文字列|
|uri|文字列|
|path|文字列|

## 写真撮影を実行

写真を撮影します。非同期で実行されるのでレスポンスに画像情報は入っていきません。

### 基本情報

APIパス
: /gotapi/mediaStreamRecording/onphoto

HTTPメソッド
: PUT

### リクエスト

#### HTTPヘッダー

|ヘッダーの種類|内容|
|----------------|----------------|
|Content-Type|application/json|

#### パラメータ

|キー|必須|型|場所|説明|
|-----|-----|-----|-----|-----|
|serviceId|✓|文字列|クエリー|サービスIDを指定します|
|accessToken|✓|文字列|クエリー|取得したアクセストークン|
|sessionKey|✓|文字列|クエリー|

### レスポンス

#### HTTPレスポンス

|HTTPステータスコード|内容|
|-----|-----|
|200|成功した際の情報|

エラーについては [エラーについて](./error.md) を参照してください。

#### レスポンス内容

|キー|型|
|----|----|
|result|数値|
|product|文字列|
|version|文字列|

## カメラの映像をプレビューする

カメラの映像をリアルタイムプレビューするためのURIを取得します。URIはmultipart/x-mixed-replaceとなっているのでimgタグのsrcに適用するだけでリアルタイムにプレビューが更新されます。

### 基本情報

APIパス
: /gotapi/mediaStreamRecording/preview

HTTPメソッド
: PUT

### リクエスト

#### HTTPヘッダー

|ヘッダーの種類|内容|
|----------------|----------------|
|Content-Type|application/json|

#### パラメータ

|キー|必須|型|場所|説明|
|-----|-----|-----|-----|-----|
|serviceId|✓|文字列|クエリー|サービスIDを指定します|
|accessToken|✓|文字列|クエリー|取得したアクセストークン|
|target|✓|文字列|クエリー|対象となるデバイスのカメラID|

### レスポンス

#### HTTPレスポンス

|HTTPステータスコード|内容|
|-----|-----|
|200|HTTP経由でアクセスするファイル情報|

エラーについては [エラーについて](./error.md) を参照してください。

#### レスポンス内容

|キー|型|
|----|----|
|result|数値|
|product|文字列|
|uri|文字列|
|version|文字列|
