# Filedescriptor API

## デバイス上のファイルを開く

デバイス上にあるファイルを開きます。このファイルは新規作成されます。

### 基本情報

APIパス
: /gotapi/fileDescriptor/open

HTTPメソッド
: GET

### リクエスト

#### HTTPヘッダー

|ヘッダーの種類|内容|
|----------------|----------------|
|Content-Type|application/json|

#### パラメータ

|キー|必須|型|場所|説明|
|-----|-----|-----|-----|-----|
|serviceId|✓|文字列|クエリー|サービスIDを指定します|
|accessToken|✓|文字列|クエリー|取得したアクセストークン|
|path|✓|文字列|クエリー|ファイルのパス|
|flag|✓|文字列|クエリー|ファイルの読み書きフラグ。rで読み取りのみ、rwで読み書き。|

### レスポンス

#### HTTPレスポンス

|HTTPステータスコード|内容|
|-----|-----|
|200|HTTP経由でアクセスするファイル情報|

エラーについては [エラーについて](./error.md) を参照してください。

#### レスポンス内容

|キー|型|
|----|----|
|result|数値|
|product|文字列|
|version|文字列|

## 指定したパスに書き込む

指定したファイルの内容をそのまま書き込みます。書き込みを開始する場所が指定できます。

### 基本情報

APIパス
: /gotapi/fileDescriptor/write

HTTPメソッド
: PUT

### リクエスト

#### HTTPヘッダー

|ヘッダーの種類|内容|
|----------------|----------------|
|Content-Type|application/json|

#### パラメータ

|キー|必須|型|場所|説明|
|-----|-----|-----|-----|-----|
|media|✓|File|formData|書き込む内容。画像、動画、テキストファイルなど|
|position|✓|文字列|formData|ファイルの書き込み位置を指定|
|path|✓|文字列|formData|ファイルのパス|
|flag|✓|文字列|formData|ファイルの読み書きフラグ。rで読み取りのみ、rwで読み書き。|
|serviceId|✓|文字列|クエリー|サービスIDを指定します|
|accessToken|✓|文字列|クエリー|取得したアクセストークン|

### レスポンス

#### HTTPレスポンス

|HTTPステータスコード|内容|
|-----|-----|
|200|HTTP経由でアクセスするファイル情報|

エラーについては [エラーについて](./error.md) を参照してください。

#### レスポンス内容

|キー|型|
|----|----|
|result|数値|
|product|文字列|
|version|文字列|

## ファイルを読み込む

指定したパスのファイルを読み込みます。読み込み開始する場所、長さを指定できます。

### 基本情報

APIパス
: /gotapi/fileDescriptor/read

HTTPメソッド
: GET

### リクエスト

#### HTTPヘッダー

|ヘッダーの種類|内容|
|----------------|----------------|
|Content-Type|application/json|

#### パラメータ

|キー|必須|型|場所|説明|
|-----|-----|-----|-----|-----|
|serviceId|✓|文字列|クエリー|サービスIDを指定します|
|accessToken|✓|文字列|クエリー|取得したアクセストークン|
|path|✓|文字列|クエリー|ファイルのパス|
|position|✓|文字列|クエリー|ファイルの書き込み位置を指定|
|length|✓|文字列|クエリー|ファイルを読み込む長さ|

### レスポンス

#### HTTPレスポンス

|HTTPステータスコード|内容|
|-----|-----|
|200|HTTP経由でアクセスするファイル情報|

エラーについては [エラーについて](./error.md) を参照してください。

#### レスポンス内容

|キー|型|
|----|----|
|result|数値|
|fileData|文字列|
|product|文字列|
|size|数値|
|version|文字列|

## ファイルのポインタを閉じる

ファイルを閉じます。

### 基本情報

APIパス
: /gotapi/fileDescriptor/close

HTTPメソッド
: PUT

### リクエスト

#### HTTPヘッダー

|ヘッダーの種類|内容|
|----------------|----------------|
|Content-Type|application/json|

#### パラメータ

|キー|必須|型|場所|説明|
|-----|-----|-----|-----|-----|
|serviceId|✓|文字列|クエリー|サービスIDを指定します|
|accessToken|✓|文字列|クエリー|取得したアクセストークン|
|path|✓|文字列|クエリー|ファイルのパス|

### レスポンス

#### HTTPレスポンス

|HTTPステータスコード|内容|
|-----|-----|
|200|HTTP経由でアクセスするファイル情報|

エラーについては [エラーについて](./error.md) を参照してください。

#### レスポンス内容

|キー|型|
|----|----|
|result|数値|
|product|文字列|
|version|文字列|

## ファイルの変更を監視する

ファイルが変更されるとWebSocket経由でイベントを受け取れるようになります。

### 基本情報

APIパス
: /gotapi/fileDescriptor/onwatchfile

HTTPメソッド
: PUT

### リクエスト

#### HTTPヘッダー

|ヘッダーの種類|内容|
|----------------|----------------|
|Content-Type|application/json|

#### パラメータ

|キー|必須|型|場所|説明|
|-----|-----|-----|-----|-----|
|serviceId|✓|文字列|クエリー|サービスIDを指定します|
|accessToken|✓|文字列|クエリー|取得したアクセストークン|
|sessionKey|✓|文字列|クエリー|WebSocketで受け取るための一意のキー|

### レスポンス

#### HTTPレスポンス

|HTTPステータスコード|内容|
|-----|-----|
|200|HTTP経由でアクセスするファイル情報|

エラーについては [エラーについて](./error.md) を参照してください。

#### レスポンス内容

|キー|型|
|----|----|
|result|数値|
|product|文字列|
|version|文字列|
